webpackJsonp([1],{"4oDS":function(t,e){},"9Dx4":function(t,e){},Akph:function(t,e,a){t.exports=a.p+"static/img/addType.35a9d0d.png"},DjbF:function(t,e){},JyPj:function(t,e){},KItN:function(t,e,a){t.exports=a.p+"static/img/logo.a9a6581.png"},NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a("IvJb"),s={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]};var i=a("C7Lr")({name:"App"},s,!1,function(t){a("bSyW")},null,null).exports,n=a("zO6J"),o={data:function(){return{src:"https://open.weixin.qq.com/connect/qrconnect?appid=wxe1f5def243e0390b&scope=snsapi_login&redirect_uri=https://abstest.tenpay.com/abs/author/callBack.do&state=0001&login_type=jssdk&self_redirect=default&style=black&href=./wx.css"}},computed:{setSrc:function(){return"https://open.weixin.qq.com/connect/qrconnect?appid="+this.appid+"&scope="+this.scope+"&redirect_uri="+this.redirect_uri+"&state="+this.state+"&login_type=jssdk&self_redirect=default&style="+this.theme+"&href="+this.href}},props:{appid:String,scope:String,redirect_uri:String,state:{type:String,default:""},theme:{type:String,default:"black"},href:{type:String,default:""}}},l={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("iframe",{attrs:{scrolling:"no",width:"300",height:"400",frameBorder:"0",allowTransparency:"true",src:this.setSrc}})])},staticRenderFns:[]},c={name:"login",components:{wxlogin:a("C7Lr")(o,l,!1,null,null,null).exports},data:function(){return{appId:"wxb41c2d9e3682c984",scope:"snsapi_login",redirect_uri:"http%3A%2F%2Fwww.hwyst.net%2Fttzy%2Findex.html%23%2Fredirect"}},methods:{goMain:function(){this.$router.push("/main")}},mounted:function(){console.log(this.redirect_uri)},beforeMount:function(){}},u={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"login"},[e("div",{staticClass:"content"},[this._m(0),this._v(" "),e("div",{staticClass:"qr tc"},[e("wxlogin",{attrs:{appid:this.appId,scope:this.scope,redirect_uri:this.redirect_uri}})],1),this._v(" "),this._m(1)])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"header tc"},[e("img",{staticClass:"title",attrs:{src:a("KItN"),alt:"logo"}}),this._v(" "),e("span",{staticClass:"title-low"},[this._v("后台管理系统")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"footer"},[e("p",{staticClass:"copy-right tr fl"},[this._v("深圳天天艺境文化传播有限公司")]),this._v(" "),e("p",{staticClass:"tl fl"},[this._v(" 粤 ICP 备 09109527 号-1 ")])])}]};var d=a("C7Lr")(c,u,!1,function(t){a("4oDS")},"data-v-49ede11e",null).exports,m=a("3cXf"),p=a.n(m),f={name:"redirect",methods:{getParams:function(){return location.href.split("?")[1].split("&")[0].split("=")[1]}},mounted:function(){var t=this,e={code:this.getParams(),noCheck:1};try{this.$ajax.autoService.login(e).then(function(e){if(200===e.status){var a=e.data;if(console.log(a),"success"===a.msg){if(console.log(a.userInfo),a.userInfo){var r=a.userInfo.roles;sessionStorage.setItem("myRoles",p()(r));for(var s=!1,i=0;i<r.length;i++){switch(r[i].roleKey){case"admin":case"checker":case"writer":case"common":s=!0;break;default:s=!1}if(s){t.$router.push("/main");break}}s||(t.$router.push("/NoAuthority"),sessionStorage.removeItem("myRoles"))}}else t.$message.error(a.msg),setTimeout(function(){t.$router.push("/login")},2e3)}},function(e){t.$message.error(e),setTimeout(function(){t.$router.push("/login")},2e3)})}catch(e){this.$message.error(e),setTimeout(function(){t.$router.push("/login")},2e3)}}},h={render:function(){var t=this.$createElement;return(this._self._c||t)("div",[this._v("\n\t登录中...\n")])},staticRenderFns:[]};var g=a("C7Lr")(f,h,!1,function(t){a("hPPW")},"data-v-f76781c8",null).exports,v={name:"main-content",data:function(){return{canWrite:!1,attrTypeList:[],searchType:"",searchOptions:[],searchInput:"",dialogFormVisible:!1,formLabelWidth:"100px",addForm:{},multipleSelection:[],attrData:[],tableData:[],isActive:0,currentTypeKey:"",currentActiveItem:"",addDetailData:[],operatingMode:"",fileArr:[],currentUploadAttrKey:""}},methods:{getResTable:function(t,e){this.currentTypeKey=t.typeKey,this.currentActiveItem=t.name,this.isActive=e,this.searchType=this.currentTypeKey,this.getTableByType()},getTableByType:function(){var t=this,e={typekey:this.currentTypeKey};this.$ajax.attr.getAttrAll(e).then(function(e){if(200===e.status){var a=e.data;t.attrData=JSON.parse(a[0].data),t.getResTableDetail(0,10)}},function(e){t.$message.error(e.message)})},getResTableDetail:function(t,e){var a=this,r={typekey:this.currentTypeKey,start:t,len:e};this.$ajax.detail.getDetailAll(r).then(function(t){if(200===t.status){var e=t.data;if(e.length>0){if("error"===e[0].state)return void a.$message.error(e[0].message);var r=JSON.parse(e[0].data);a.getLineData(r)}}},function(t){a.$message.error(t.message)})},getLineData:function(t){this.tableData.length=0;for(var e={},a=t.length,r=void 0,s=0,i=[],n=0;n<a;n++)r!==t[n].resourceKey&&(0!==n&&(i[s-1]=e),r=t[n].resourceKey,s++,e={}),e[t[n].attrKey]=t[n].attrValue,e.resourceKey=t[n].resourceKey,n===a-1&&(i[s-1]=e);this.tableData=i},addSource:function(){this.operatingMode="add",this.clearForm(),this.addForm.title="新增"+this.currentActiveItem+"资源",this.dialogFormVisible=!0},clearForm:function(){for(var t in this.addForm)this.addForm.hasOwnProperty(t)&&"title"!==t&&(this.addForm[t]="")},submitAudit:function(){var t=this,e=[];for(var a in this.addForm)this.addForm.hasOwnProperty(a)&&"title"!==a&&"resourceKey"!==a&&e.push({attrKey:a,attrValue:this.addForm[a],typeKey:this.currentTypeKey});console.log(e),0!==e.length?this.$confirm("确认提交审核吗?","提示",{confirmButtonText:"提交审核",cancelButtonText:"我再想想",type:"warning",center:!0}).then(function(){var a={json:decodeURI(encodeURI(p()(e)))};"add"===t.operatingMode?t.addDetailFun(a):"update"===t.operatingMode&&t.updateDetailFun(e)}).catch(function(){}):this.$message.error("请输入内容")},beforeUpload:function(t,e){var a="https://www.hwyst.net/ttzy/rs/file/add.do?json={'attrKey':'"+t.attrKey+"','typeKey':'"+t.typeKey+"'}";this.$set(this.attrData[e],"url",a),this.addForm[t.attrKey]&&""!==this.addForm[t.attrKey]||(this.addForm[t.attrKey]="",this.currentUploadAttrKey=t.attrKey)},addDetailFun:function(t){var e=this;this.$ajax.detail.addDetail(t).then(function(t){if(200===t.status){var a=t.data;"error"===a[0].state?e.$message.error(a[0].message):(e.$message({type:"success",message:"提交成功!请等待审核！"}),e.getTableByType(),e.dialogFormVisible=!1)}},function(t){e.$message.error(t.message)})},updateSource:function(){if(this.multipleSelection.length>1)this.$message({type:"warning",message:"一次最多只能修改一条数据!"});else if(this.multipleSelection.length<1)this.$message({type:"warning",message:"请先选择需要修改的数据!"});else{this.clearForm(),this.operatingMode="update",this.addForm.title="修改"+this.currentActiveItem+"资源",this.dialogFormVisible=!0;for(var t=0;t<this.attrData.length;t++){var e=this.attrData[t].attrKey;this.addForm[e]=this.multipleSelection[0][e]}}},updateDetailFun:function(t){var e=this,a={json:decodeURI(encodeURI(p()(t))),resourcekey:this.multipleSelection[0].resourceKey};this.$ajax.detail.updateDetail(a).then(function(t){if(200===t.status){var a=t.data;"error"===a[0].state?e.$message.error(a[0].message):(e.$message({type:"success",message:"提交成功!请等待审核！"}),e.getTableByType(),e.dialogFormVisible=!1)}},function(t){e.$message.error(t.message)})},deleteConfirm:function(){var t=this;this.multipleSelection.length>1?this.$message({type:"warning",message:"一次最多只能删除一条数据!"}):this.multipleSelection.length<1?this.$message({type:"warning",message:"请先选择需要删除的数据!"}):this.$confirm("是否删除该条记录?","提示",{confirmButtonText:"提交审核",cancelButtonText:"我再想想",type:"warning",center:!0}).then(function(){var e={resourcekey:t.multipleSelection[0].resourceKey};t.$ajax.detail.delDetail(e).then(function(e){if(200===e.status){var a=e.data;"error"===a[0].state?t.$message.error(a[0].message):(t.getTableByType(),t.$message.success("删除成功"))}})}).catch(function(){})},handleSelectionChange:function(t){this.multipleSelection=t},goAssets:function(){this.$router.push("/assets")},exit:function(){this.$router.push("/login"),sessionStorage.removeItem("myRoles")},getDefAll:function(){var t=this;this.$ajax.def.getDefAll({typekey:"RDf示例表ID"}).then(function(e){if(200===e.status){var a=e.data;t.attrTypeList=JSON.parse(a[0].data),t.searchOptions=t.attrTypeList,t.attrTypeList.length>0&&t.getResTable(t.attrTypeList[0],0)}},function(e){t.$message.error(e.message)})},search:function(){var t=this,e={typekey:this.searchType,start:0,len:10,searchkey:{searchKeyMap:'[{"RDt示例值ID":"1234"}]'}};this.$ajax.search.searchAll(e).then(function(e){if(200===e.status){var a=e.data;if("error"===a[0].state)t.$message.error(a[0].message);else{var r=JSON.parse(a[0].data);t.getLineData(r)}}},function(e){t.$message.error(e.message)})},uploadSuc:function(t){this.addForm[this.currentUploadAttrKey]=t[0].data,console.log("upload success")},uploadFail:function(){console.log("upload Fail")},getLoadPic:function(){var t=this;this.$ajax.file.getFiles({filekey:"RFlExamplesFile"}).then(function(t){if(200===t.status){var e=t.data;console.log(JSON.parse(e[0].data))}},function(e){t.$message.error(e.message)})}},mounted:function(){var t=this;this.$chargeAuthority().then(function(e){console.log(e),t.getDefAll(),"writer"===e&&(t.canWrite=!0)},function(e){console.log(e),t.$router.replace("/")})}},y={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"main-content"},[r("el-container",[r("el-header",[r("el-row",[r("el-col",{staticClass:"logo tc",attrs:{span:4}},[r("img",{staticStyle:{"margin-top":"-10px"},attrs:{width:"150",src:a("KItN"),alt:"logo"}})]),t._v(" "),r("el-col",{staticClass:"search-content",attrs:{span:12,offset:2}},[r("el-input",{attrs:{placeholder:"输入关键字"},model:{value:t.searchInput,callback:function(e){t.searchInput=e},expression:"searchInput"}},[r("el-select",{attrs:{slot:"prepend",disabled:"",placeholder:"选择资源类型"},slot:"prepend",model:{value:t.searchType,callback:function(e){t.searchType=e},expression:"searchType"}},t._l(t.searchOptions,function(t){return r("el-option",{key:t.typeKey,attrs:{label:t.name,value:t.typeKey}})})),t._v(" "),r("el-button",{attrs:{slot:"append",icon:"el-icon-search"},nativeOn:{click:function(e){return t.search(e)}},slot:"append"},[t._v("搜索\n\t\t\t\t\t\t")])],1)],1),t._v(" "),r("el-col",{staticClass:"exit-btn tr",attrs:{span:6}},[r("span",{staticClass:"exit",on:{click:t.exit}})])],1)],1),t._v(" "),r("el-container",[r("el-aside",{attrs:{width:"300px"}},[r("div",{staticClass:"type-list"},[r("ul",t._l(t.attrTypeList,function(e,a){return r("li",{staticClass:"type-list-item tc",class:{isActive:t.isActive===a},on:{click:function(r){t.getResTable(e,a)}}},[t._v("\n\t\t\t\t\t\t\t"+t._s(e.name)+"\n\t\t\t\t\t\t")])}))]),t._v(" "),t.canWrite?r("div",{staticClass:"bottom-btn tc",on:{click:t.goAssets}},[r("img",{attrs:{src:a("rSKv"),alt:"icon",width:"30",height:"30"}}),t._v("\n\t\t\t\t\t资源类别管理\n\t\t\t\t")]):t._e()]),t._v(" "),r("el-main",[r("div",{staticClass:"main-head"},[r("div",{staticClass:"title"},[t._v("资源录入")]),t._v(" "),t.canWrite?r("ul",{staticClass:"btns fr"},[r("li",{staticClass:"fl"},[r("span",{staticClass:"operate-btn type-in",on:{click:t.addSource}})]),t._v(" "),r("li",{staticClass:"fl"},[r("span",{staticClass:"operate-btn delete",on:{click:t.deleteConfirm}})]),t._v(" "),r("li",{staticClass:"fl"},[r("span",{staticClass:"operate-btn update",on:{click:t.updateSource}})])]):t._e()]),t._v(" "),r("div",{staticClass:"main-body"},[r("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,height:"100%",stripe:"",border:""},on:{"selection-change":t.handleSelectionChange}},[r("el-table-column",{attrs:{type:"selection",width:"55"}}),t._v(" "),t._l(t.attrData,function(t,e){return[r("el-table-column",{attrs:{prop:t.attrKey,label:t.attrName}})]})],2)],1),t._v(" "),r("div",{staticClass:"main-foot tc"},[r("el-pagination",{attrs:{background:"","prev-text":"<上一页","next-text":"下一页>",layout:"prev, pager, next,total,jumper",total:1}})],1),t._v(" "),r("el-dialog",{attrs:{title:t.addForm.title,width:"30%",visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[r("el-form",{attrs:{model:t.addForm}},t._l(t.attrData,function(e,a){return r("el-form-item",{key:a,attrs:{label:e.attrName,"label-width":t.formLabelWidth}},["picture"===e.attrType||"video"===e.attrType?r("el-upload",{ref:"upload",refInFor:!0,staticClass:"upload-demo",attrs:{limit:1,multiple:!1,"on-success":t.uploadSuc,"on-error":t.uploadFail,"before-upload":t.beforeUpload(e,a),action:e.url,"auto-upload":!0}},[r("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[t._v("选取文件")])],1):t._e(),t._v(" "),"picture"!==e.attrType&&"video"!==e.attrType?r("el-input",{attrs:{maxlength:e.attrlen>0?e.attrlen:100,placeholder:e.attrlen>0?"限制"+e.attrlen+"个字符":"","auto-complete":"off"},model:{value:t.addForm[e.attrKey],callback:function(a){t.$set(t.addForm,e.attrKey,a)},expression:"addForm[item.attrKey]"}}):t._e()],1)})),t._v(" "),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{type:"primary"},on:{click:t.submitAudit}},[t._v("提交审核")])],1)],1)],1)],1)],1)],1)},staticRenderFns:[]};var b=a("C7Lr")(v,y,!1,function(t){a("JyPj")},"data-v-801e48c0",null).exports,_={name:"add-assets-con",data:function(){return{form:{name:"",typeKey:"RDf示例表ID"},attrList:[{attrName:"",type:"default"}],attrTypeList:[]}},methods:{addConfirm:function(){if(""!==this.form.name){for(var t=!1,e=0;e<this.attrList.length;e++)if(""===this.attrList[e].attrName||""===this.attrList[e].type){t=!0;break}t?this.$message.error("属性名称或类型不能为空"):this.addResType()}else this.$message.error("资源类别名称不能为空")},addResType:function(){var t=this,e={name:this.form.name},a={json:decodeURI(encodeURI(p()(e)))};this.$ajax.def.addDef(a).then(function(a){if(200===a.status){var r=a.data;"error"===r[0].state?t.$message.error(r[0].message):(t.$message.success("资源类型添加成功"),t.form.name="",t.form.typeKey="",t.getLeft(),t.$ajax.def.getDefAll(e).then(function(a){if(200===a.status)for(var r=a.data,s=JSON.parse(r[0].data),i=0;i<s.length;i++)if(s[i].name===e.name){t.addAttrFun(s[i].typeKey);break}},function(e){t.$message.error(e.message)}))}},function(e){t.$message.error(e.message)})},addAttrFun:function(t){for(var e=0;e<this.attrList.length;e++)this.addAttrItemFun(this.attrList[e],t)},addAttrItemFun:function(t,e){var a=this,r={attrName:t.attrName,attrType:t.type,typeKey:e,attrlen:t.attrlen},s={json:decodeURI(encodeURI(p()(r)))};this.$ajax.attr.addAttr(s).then(function(t){if(200===t.status){var e=t.data;"error"===e[0].state?a.$message.error(e[0].message):(a.$message.success("资源属性新增成功"),a.attrList.splice(1),a.attrList[0].attrName="")}})},addAttr:function(){this.attrList.push({attrName:"",type:"default"})},getLeft:function(){var t=this;this.$ajax.def.getDefAll({typekey:""}).then(function(e){if(200===e.status){var a=e.data;t.attrTypeList=JSON.parse(a[0].data)}},function(e){t.$message.error(e.message)})}},mounted:function(){this.getLeft()}},$={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"add-assets-con"},[a("el-row",[a("el-col",{staticClass:"content left",attrs:{span:6}},[a("h2",{staticClass:"tc title"},[t._v("资源类别")]),t._v(" "),a("div",{staticClass:"tags"},t._l(t.attrTypeList,function(e,r){return a("el-tag",{key:r},[t._v(t._s(e.name))])}))]),t._v(" "),a("el-col",{staticClass:"content right",attrs:{span:18}},[a("el-form",{ref:"form",attrs:{model:t.form,"label-width":"150px"}},[a("el-form-item",{attrs:{label:"资源类别名称"}},[a("el-input",{attrs:{placeholder:"请输入名称"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),t._v(" "),t._l(t.attrList,function(e,r){return a("el-form-item",{key:r,attrs:{label:"属性名称"}},[a("el-input",{attrs:{placeholder:"请输入属性名称"},model:{value:e.attrName,callback:function(a){t.$set(e,"attrName",a)},expression:"item.attrName"}},[a("el-select",{attrs:{slot:"append",placeholder:"请选择属性类型"},slot:"append",model:{value:e.type,callback:function(a){t.$set(e,"type",a)},expression:"item.type"}},[a("el-option",{attrs:{label:"文字",value:"default"}}),t._v(" "),a("el-option",{attrs:{label:"图片",value:"picture"}}),t._v(" "),a("el-option",{attrs:{label:"视频",value:"video"}})],1)],1),t._v(" "),"default"===e.type?a("el-input",{staticStyle:{width:"100px"},attrs:{placeholder:"字符限制"},model:{value:e.attrlen,callback:function(a){t.$set(e,"attrlen",a)},expression:"item.attrlen"}}):t._e(),t._v(" "),r===t.attrList.length-1?a("el-button",{attrs:{type:"primary"},on:{click:function(e){e.preventDefault(),t.addAttr()}}},[t._v("\n\t\t\t\t\t\t增加\n\t\t\t\t\t")]):t._e()],1)}),t._v(" "),a("p",{staticClass:"tc "},[a("el-button",{staticClass:"add-confirm-btn",attrs:{type:"success"},on:{click:t.addConfirm}},[t._v("确认新增")])],1)],2)],1)],1)],1)},staticRenderFns:[]};var A={name:"update-assets-con",data:function(){return{dialogFormVisible:!1,dialogResVisible:!1,resUpdateVisible:!1,formLabelWidth:"100px",attrTypeList:[],form:{name:""},resAttr:{attrKey:"",attrName:"",remark:""},type1:"",type2:"",attrList:[],updateTypeKey:""}},methods:{update:function(t){var e=this,a={typekey:t.typeKey};this.updateTypeKey=t.typeKey,this.form.name=t.name,this.$ajax.attr.getAttrAll(a).then(function(t){if(200===t.status){var a=t.data;e.attrList=JSON.parse(a[0].data),e.dialogFormVisible=!0}})},addAttr:function(){this.dialogResVisible=!0,this.resAttr.attrKey="",this.resAttr.attrName="",this.resAttr.remark=""},updateThisLine:function(t){this.resAttr.attrKey=t.attrKey,this.resAttr.attrName=t.attrName,this.resAttr.remark=t.remark,this.resUpdateVisible=!0},delThisLine:function(t,e){var a=this;this.$confirm("是否确定删除该属性?","提示",{confirmButtonText:"提交审核",cancelButtonText:"我再想想",type:"warning",center:!0}).then(function(){var e={attrkey:t.attrKey};a.$ajax.attr.delAttr(e).then(function(t){if(200===t.status){var e=t.data;"error"===e[0].state?a.$message.error(e[0].message):(a.$message.success("删除成功"),a.dialogFormVisible=!1,a.refreshIndex())}})}).catch(function(t){console.log(t)})},confirmAddAttr:function(){var t=this;if(""!==this.resAttr.attrName){var e={attrKey:this.resAttr.attrKey,attrLevel:"0",attrName:this.resAttr.attrName,attrType:"default",remark:this.resAttr.remark,typeKey:this.updateTypeKey},a={json:decodeURI(encodeURI(p()(e)))};this.$ajax.attr.addAttr(a).then(function(e){if(200===e.status){var a=e.data;"error"===a[0].state?t.$message.error(a[0].message):(t.$message.success("新增成功"),t.refreshIndex(),t.dialogFormVisible=!1,t.dialogResVisible=!1)}})}else this.$message.warning("属性名称不能为空!")},confirmUpdateAttr:function(){var t=this;if(""!==this.resAttr.attrName){var e={attrKey:this.resAttr.attrKey,attrLevel:"0",attrName:this.resAttr.attrName,attrType:"default",remark:this.resAttr.remark,typeKey:this.updateTypeKey},a={json:decodeURI(encodeURI(p()(e)))};this.$ajax.attr.updateAttr(a).then(function(e){if(200===e.status){var a=e.data;"error"===a[0].state?t.$message.error(a[0].message):(t.$message.success("修改成功"),t.refreshIndex(),t.dialogFormVisible=!1,t.dialogResVisible=!1,t.resUpdateVisible=!1)}})}else this.$message.warning("属性名称不能为空!")},confirmUpdate:function(){var t=this;""!==this.form.name?this.$confirm("是否确定保存?","提示",{confirmButtonText:"提交审核",cancelButtonText:"我再想想",type:"warning",center:!0}).then(function(){var e={typeKey:t.updateTypeKey,remark:"",name:t.form.name},a={json:decodeURI(encodeURI(p()(e)))};t.$ajax.def.updateDef(a).then(function(e){if(200===e.status){var a=e.data;"error"===a[0].state?t.$message.error(a[0].message):(t.$message.success("修改成功"),t.refreshIndex(),t.dialogFormVisible=!1)}})}).catch(function(t){console.log(t)}):this.$message({type:"warning",message:"资源名称不能为空!"})},getResAttr:function(t){var e=this,a={typekey:this.attrTypeList[t].typeKey};this.$ajax.attr.getAttrAll(a).then(function(a){if(200===a.status){var r=a.data;e.$set(e.attrTypeList[t],"attr",JSON.parse(r[0].data))}})},refreshIndex:function(){var t=this;this.$ajax.def.getDefAll({typekey:"RDf示例表ID"}).then(function(e){if(200===e.status){var a=e.data;t.attrTypeList=JSON.parse(a[0].data);for(var r=0;r<t.attrTypeList.length;r++)t.getResAttr(r)}},function(e){t.$message.error(e.message)})},deleteRs:function(t){var e=this;this.$confirm("确定删除该属性吗?","提示",{confirmButtonText:"提交审核",cancelButtonText:"我再想想",type:"warning",center:!0}).then(function(){var a={typekey:t.typeKey};e.$ajax.def.delDef(a).then(function(t){if(200===t.status){var a=t.data;"error"===a[0].state?e.$message.error(a[0].message):(e.$message.success("删除成功"),e.refreshIndex())}})}).catch()}},mounted:function(){this.refreshIndex()}},x={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"update-assets-con"},[a("div",{staticClass:"father-box"},[a("div",{staticClass:"content"},t._l(t.attrTypeList,function(e,r){return a("el-card",{key:r,staticClass:"box-card"},[a("h3",{staticClass:"title"},[t._v(t._s(e.name))]),t._v(" "),a("div",{staticClass:"tags"},t._l(e.attr,function(e,r){return a("el-tag",{key:r,attrs:{type:"info"}},[t._v(t._s(e.attrName))])})),t._v(" "),a("el-button",{staticClass:"btn",attrs:{type:"warning"},on:{click:function(a){t.update(e)}}},[t._v("修改")]),t._v(" "),a("el-button",{staticClass:"btn btn-del",attrs:{type:"primary"},on:{click:function(a){t.deleteRs(e)}}},[t._v("删除")])],1)})),t._v(" "),a("div",{staticClass:"assets-footer tc"},[a("el-pagination",{attrs:{background:"","prev-text":"<上一页","next-text":"下一页>",layout:"prev, pager, next,total,jumper",total:2}})],1)]),t._v(" "),a("el-dialog",{attrs:{title:"修改资源类别",width:"50%",visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("el-form",{attrs:{model:t.form}},[a("el-form-item",{attrs:{label:"资源类别名称","label-width":t.formLabelWidth}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),t._v(" "),t._l(t.attrList,function(e,r){return a("el-form-item",{key:r,attrs:{label:"属性名称","label-width":t.formLabelWidth}},[a("el-input",{attrs:{readonly:"","auto-complete":"off"},model:{value:e.attrName,callback:function(a){t.$set(e,"attrName",a)},expression:"item.attrName"}}),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(a){a.preventDefault(),t.delThisLine(e,r)}}},[t._v("删除")]),t._v(" "),a("el-button",{attrs:{type:"warning"},on:{click:function(a){a.preventDefault(),t.updateThisLine(e,r)}}},[t._v("修改")])],1)}),t._v(" "),a("el-form-item",{staticClass:"tc"},[a("el-button",{attrs:{type:"danger"},on:{click:function(e){return e.preventDefault(),t.addAttr(e)}}},[t._v("增加属性")])],1)],2),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"success"},on:{click:t.confirmUpdate}},[t._v("确定修改")])],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"增加资源属性",width:"30%",visible:t.dialogResVisible},on:{"update:visible":function(e){t.dialogResVisible=e}}},[a("el-form",[a("el-form-item",{attrs:{label:"属性名称","label-width":t.formLabelWidth}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:t.resAttr.attrName,callback:function(e){t.$set(t.resAttr,"attrName",e)},expression:"resAttr.attrName"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"备注","label-width":t.formLabelWidth}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:t.resAttr.remark,callback:function(e){t.$set(t.resAttr,"remark",e)},expression:"resAttr.remark"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"success"},on:{click:t.confirmAddAttr}},[t._v("确定增加")])],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"修改资源属性",width:"30%",visible:t.resUpdateVisible},on:{"update:visible":function(e){t.resUpdateVisible=e}}},[a("el-form",[a("el-form-item",{attrs:{label:"属性名称","label-width":t.formLabelWidth}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:t.resAttr.attrName,callback:function(e){t.$set(t.resAttr,"attrName",e)},expression:"resAttr.attrName"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"备注","label-width":t.formLabelWidth}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:t.resAttr.remark,callback:function(e){t.$set(t.resAttr,"remark",e)},expression:"resAttr.remark"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"success"},on:{click:t.confirmUpdateAttr}},[t._v("确定修改")])],1)],1)],1)},staticRenderFns:[]};var k={name:"assets-manager",data:function(){return{headerActive:0}},components:{addAssetsCon:a("C7Lr")(_,$,!1,function(t){a("oxcE")},"data-v-6e7852d3",null).exports,updateAssetsCon:a("C7Lr")(A,x,!1,function(t){a("DjbF")},"data-v-6d4ea804",null).exports},methods:{goIndex:function(){this.$router.push("/main"),this.headerActive=2}},mounted:function(){var t=this;this.$chargeAuthority().then(function(){},function(){t.$router.replace("/")})}},T={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"assets-manager"},[r("el-container",[r("el-header",{attrs:{height:"80px"}},[r("el-row",[r("el-col",{staticClass:"top-btn tc",class:{active:0===t.headerActive},attrs:{span:8}},[r("img",{attrs:{src:a("Akph"),alt:"icon",height:"50"},on:{click:function(e){t.headerActive=0}}})]),t._v(" "),r("el-col",{staticClass:"top-btn tc",class:{active:1===t.headerActive},attrs:{span:8}},[r("img",{attrs:{src:a("iNLa"),alt:"icon",height:"50"},on:{click:function(e){t.headerActive=1}}})]),t._v(" "),r("el-col",{staticClass:"top-btn tc",class:{active:2===t.headerActive},attrs:{span:8}},[r("a",{staticClass:"back-btn",attrs:{href:"javascript:void (0)"},on:{click:t.goIndex}},[t._v("返回首页")])])],1)],1),t._v(" "),r("el-main",[0===t.headerActive?r("add-assets-con"):r("update-assets-con")],1)],1)],1)},staticRenderFns:[]};var C=a("C7Lr")(k,T,!1,function(t){a("9Dx4")},"data-v-ce63ad10",null).exports,w={name:"no-authority",data:function(){return{time:10,authority:!0}},methods:{chargeAuthority:function(){var t=sessionStorage.getItem("myRoles");if(!t||""===t)return this.authority=!1,void this.timeDown();for(var e=JSON.parse(t),a=!1,r=0;r<e.length;r++){switch(e[r].roleKey){case"admin":case"checker":case"writer":case"common":a=!0;break;default:a=!1}if(a){this.authority=!0,this.$router.replace("/main");break}}a||(this.authority=!1,this.timeDown())},timeDown:function(){var t=this,e=setInterval(function(){t.time>0?t.time--:(t.$router.replace("/"),clearInterval(e))},1e3)}},mounted:function(){this.chargeAuthority()}},F={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"no-authority"},[t.authority?a("div",[a("h1",[t._v("欢迎~~请稍后...")])]):a("div",[t._m(0),t._v(" "),a("h2",[a("span",[t._v(t._s(t.time))]),t._v("秒后\n\t\t\t"),a("router-link",{attrs:{tag:"a",to:"/"}},[t._v("返回")]),t._v("\n\t\t\t登录界面\n\t\t")],1)])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("h1",[this._v("对不起，你没有权限访问此网站，\n\t\t\t"),e("br"),this._v("请到微信小程序端注册用户或联系管理员")])}]};var K=a("C7Lr")(w,F,!1,function(t){a("aykS")},"data-v-299e026c",null).exports;r.default.use(n.a);var D=new n.a({routes:[{path:"/",name:"default",component:d},{path:"/login",name:"login",component:d},{path:"/main",name:"main",component:b},{path:"/Redirect",name:"Redirect",component:g},{path:"/NoAuthority",name:"NoAuthority",component:K},{path:"/assets",name:"assets",component:C}]}),L=a("rVsN"),I=a.n(L),S=a("aozt"),N=a.n(S),R=a("6iV/"),j=a.n(R);N.a.defaults.headers.post["Content-Type"]="application/json";var E="login/pcLogin.do",V="rs/attr/add.do",U="rs/attr/del.do",O="rs/attr/update.do",G="rs/attr/get.do",B="rs/attr/getall.do",J="rs/def/add.do",W="rs/def/del.do",P="rs/def/update.do",M="rs/def/get.do",q="rs/def/getall.do",z="rs/detail/add.do",X="rs/detail/del.do",H="rs/detail/update.do",Q="rs/detail/get.do",Y="rs/detail/getall.do",Z="/rs/search/search.do",tt="/rs/file/get.do";N.a.defaults.baseURL="https://www.hwyst.net/ttzy/",N.a.defaults.withCredentials=!0,N.a.interceptors.request.use(function(t){return"application/json"!==t.ContentType&&"get"!==t.method&&"put"!==t.method&&(t.data=j.a.stringify(t.data)),t}),r.default.prototype.$ajax={autoService:{login:function(t){return N()({method:"GET",url:E,cache:!0,params:t})},logout:function(t){}},attr:{addAttr:function(t){return N()({method:"GET",url:V,params:t})},delAttr:function(t){return N()({method:"GET",url:U,params:t})},updateAttr:function(t){return N()({method:"GET",url:O,params:t})},getAttr:function(t){return N()({method:"GET",url:G,params:t})},getAttrAll:function(t){return N()({method:"GET",url:B,params:t})}},def:{addDef:function(t){return N()({method:"GET",url:J,params:t})},delDef:function(t){return N()({method:"GET",url:W,params:t})},updateDef:function(t){return N()({method:"GET",url:P,params:t})},getDef:function(t){return N()({method:"GET",url:M,params:t})},getDefAll:function(t){return N()({method:"GET",url:q,params:t})}},detail:{addDetail:function(t){return N()({method:"GET",url:z,params:t})},delDetail:function(t){return N()({method:"GET",url:X,params:t})},updateDetail:function(t){return N()({method:"GET",url:H,params:t})},getDetail:function(t){return N()({method:"GET",url:Q,params:t})},getDetailAll:function(t){return N()({method:"GET",url:Y,params:t})}},search:{searchAll:function(t){return N()({method:"GET",url:Z,params:t})}},file:{getFiles:function(t){return N()({method:"GET",url:tt,params:t})}}},r.default.prototype.$chargeAuthority=function(){return new I.a(function(t,e){var a=sessionStorage.getItem("myRoles");if(a&&""!==a){for(var r=JSON.parse(a),s=!1,i=!1,n=0;n<r.length;n++){switch(r[n].roleKey){case"writer":i=!0;break;case"admin":case"checker":case"common":s=!0;break;default:s=!1}if(i){t("writer");break}if(s){t(!0);break}}s||e(!1)}else e(!1)})};var et=a("t+b9"),at=a.n(et);a("Xcu2");r.default.use(at.a),r.default.config.productionTip=!1,new r.default({el:"#app",router:D,components:{App:i},template:"<App/>"})},Xcu2:function(t,e){},aykS:function(t,e){},bSyW:function(t,e){},hPPW:function(t,e){},iNLa:function(t,e,a){t.exports=a.p+"static/img/updateType.f7be7ce.png"},oxcE:function(t,e){},rSKv:function(t,e,a){t.exports=a.p+"static/img/sourceM.b48826c.png"}},["NHnr"]);
//# sourceMappingURL=app.31939139d1f23f24ffd7.js.map